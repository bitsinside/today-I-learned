# Integration patterns in Microservice world

Source: <https://dzone.com/articles/integration-patterns-in-microservices-world>

## 1. Overview

### 1.1. Understanding "integration" - Applications, Integration, and Microservice

- Integration system vs applications:
  - Integration facilitates the transmission of information between systems and may be realized through the use of technologies.
  - Integration system should not hold business logic or manage business state.
  - Technical components: API Gateway, ESBs, File Transfer Systems and Messaging Systems.
- Business logic the programmatic encoding of real-world business rules that govern the access and lifecycle of business domain data.
  - Sematic transformation: requires an interpretation of business entities and their attributes following business rules.
  - Process, Orchestration, or Workflow: requires the execution of the steps of a business process, with business context, rules and management of state.
  - Data Enrichment: requires business context, state and/or rules.
- Business logic should only be implemented within an application, not within an integration layer.

### 1.2. Synchronous vs Asynchronous Integration

- Synchronous communication:
  - Consumer submits a request to a service and waits for the service to respond before the consumer can continue executing its process.
  - Example: HTTP, used with API style of integration:
    - HTTP by nature is synchronous.
    - Ideally: milliseconds to a few seconds (timeout 30-60 seconds)
- Asynchronous communication:
  - The consumer submits a message to a service but not need to wait for the service to respond. A consequence of the message in the form of a new message may be returned to the consumer at some point in the future or not at all.
  - Example: AMQP, MQTT, WebSockets,...

## 2. Integration Styles and Patterns

> **Styles**: high level, abstract, approaches to integration that represent a number of specific patterns.
> **Patterns**: Technology agnostic, generic designs that address common business problems/scenarios.

- The following integration styles:
  - API
  - Messaging
  - File Transfer

![](https://dz2cdn1.dzone.com/storage/temp/14890953-1624564471281.png)

| API                                                                                                                                                                                                                                                                                                                                                                                                  | Messaging                                                                                                                                                                                                                                                                                                                                | File Transfer                                                                                                                                                                                                                                                                                                                                                                                |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Application submits data, requests data or issues command to an internal or external application or service that requires immediate processing of submitted data or command and subsequent near-immediate response is expected.                                                                                                                                                                      | Application submits data or issues command to an internal application or service that does not require a near-immediate response.                                                                                                                                                                                                        | Transfer large data set to one or more applications as a bulk data set as part of a batch process.                                                                                                                                                                                                                                                                                           |
|                                                                                                                                                                                                                                                                                                                                                                                                      | Application submits data or issues command to an internal application or service that is likely to have an on-going planned or unplanned outages and does not require a near-immediate response.                                                                                                                                         | Existing application only supports file transfer-based integration.                                                                                                                                                                                                                                                                                                                          |
|                                                                                                                                                                                                                                                                                                                                                                                                      | Application submits data or issues command to multiple internal applications or services but does not require near-immediate response.                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                              |
|                                                                                                                                                                                                                                                                                                                                                                                                      | Application submits a high volume of data or commands to one or more internal applications or services and does not require a near-immediate response.                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                              |
| Example                                                                                                                                                                                                                                                                                                                                                                                              | Example                                                                                                                                                                                                                                                                                                                                  | Example                                                                                                                                                                                                                                                                                                                                                                                      |
| Customer requests an account via web application in digital channel. The customer has submitted their details and is awaiting a response. The response time requirement is < 3 seconds. A number of components are integrated through a series of API-based calls. This example illustrates a synchronous interaction with an end user and supporting systems that follow the API style integration. | An update to a customer’s profile is made via a web application in the digital channel. A number of systems must be notified of the changes in order for them to change their own records. This example illustrates an asynchronous update of multiple systems that does not require a response to be returned to the initiating system. | A large number of charging requests are generated on a nightly basis and must be issued to the financial system once a night for processing. A file transfer style of integration may be used to transfer the payment requests within one or more files that are transferred as part of a batch process to the financial system. This example illustrates a file transfer style integration. |

### 2.1. General Integration Principles

| Principle                                                                                                                                                                                                                                                    | Condition                                                                             | Guidelines                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | Reasoning                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Business logic should not be implemented within the integration technology layer.<br>The integration layer includes the following technical components: API gateways, ESBs, File Transfer Systems or Messaging Systems. (Think dumb pipes, smart end points) | All                                                                                   | Integration should facilitate the exchange of information between applications.<br>Integration components should not include any business logic or state.<br>Integration adapters used as a façade to API providers should not include any business logic or state.<br>Syntactic transformation for the purpose of implementing an integration adapter is not considered business logic.<br>Data enrichment is considered business logic and must not be implemented within the integration layer. This may be implemented by a package application or a microservice.<br>Orchestration is considered business logic and must not be implemented within an integration layer. This may be implemented by a package application or microservice. | Microservices are components of an application, not an integration in of itself.<br>Integration technologies are primarily designed for data transfer and have significantly less capability in solving the complex and broad set of business problems when compared with an application technology that is programmable using a general programming language.<br>Placing business logic in an integration technology mixed with the responsibility of data transfer causes a high risk of the logic being “orphaned’ outside of the applications and/or microservices that have clearly been marked as encapsulating/owning the logic for a particular business function/capability. This leads to both overhead and confusion when maintaining and extending this capability. |
| Packaged application suites comprising individually deployed applications should not have an intermediary service inserted between inter-application integration.                                                                                            | Packaged suite inter-application integration deemed internal or private by the vendor | Packaged suite applications may integration directly via point-to-point interface as inherent within the product                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | The integration between packaged application suite components have typically been built and tested by vendors to operate in a tightly integrated fashion. Inserting intermediary (e.g. API Gateways, microservices) components between pre-built components may affect performance, reliability and support.<br>Interface contracts between suite applications are volatile and may change with version updates to the products causing additional effort to update the intermediate components.                                                                                                                                                                                                                                                                                |
| Business capabilities may be exposed by packaged applications or custom microservices.                                                                                                                                                                       | All                                                                                   | Business capabilities such as Risk Engines and Product Pricing may be realised through a packaged application, a custom microservice or a combination of both.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Leverage the value provided by investments in strategic package solutions.<br>Minimise the impact on costs and supportability of modifying strategic package solutions.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |

### 2.2. Related Enterprise Architecture Principles

| Principles                                                                                                                                                                                                                                                                    | Condition | Guidelines                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | Reasoning                                                                                                                                                                                                                                                                                                     |
| ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Capability that exists within a strategic packaged application should not be hollowed out into an independent microservice if the capability does not need to be independently managed or developed and at the expense of significant cost and supportability of the package. | All       | Packaged applications should not be modified to extract and disable business capability that is central to the package operation if the capability does not need to be independently managed or developed.<br>Package applications should not be modified to extract and disable business capability if by doing so significant cost and supportability is incurred.<br>Capabilities within a packaged application may be enhanced or extended within a reasonable cost (balance cost/return).<br>Capabilities within a packaged application may be realised by complementing the inherent features within the packaged application or microservice or other systems. | Leverage the value provided by the investments in strategic packaged solutions.<br>Minimise the impact on cost and supportability of modifying strategic packaged solutions.<br>It takes significant engineering effort to implement the equivalent of packaged solutions that have had years of development. |

### 2.3. Integration Patterns - API
